// tag::versions[]
buildscript {
    dependencies {
        apply from: "versions.gradle"

        def depMgmtVersion = versions['dependency.management.plugin.version']

        classpath "io.spring.gradle:dependency-management-plugin:${depMgmtVersion}"
        classpath 'org.asciidoctor:asciidoctor-gradle-plugin:1.5.3'
        classpath 'org.asciidoctor:asciidoctorj-pdf:1.5.0-alpha.11'
    }
}


wrapper {
    gradleVersion = '3.3'
}


allprojects {
    apply plugin: 'maven'

    group = 'io.katharsis'
    version = '3.0.1-SNAPSHOT'
}




gradle.beforeProject { Project project ->
    project.with {
        if (!project.name == 'katharsis-documentation') {

            apply plugin: 'java'
            sourceCompatibility = 1.7
            targetCompatibility = 1.7

            // e.g. CDI expects those directories to be equal
            sourceSets {
                main {
                    output.resourcesDir = output.classesDir
                }
                test {
                    output.resourcesDir = output.classesDir
                }
            }
            jar {
                duplicatesStrategy = 'exclude'
            }

            apply plugin: 'io.spring.dependency-management'
            dependencies {
                testCompile group: 'junit', name: 'junit', version: '4.12'
                testCompile group: 'org.mockito', name: 'mockito-core', version: '1.10.19'
                testCompile group: 'org.assertj', name: 'assertj-core', version: '2.2.0'
            }
        }


    }
}
// end::bomSetup[]
